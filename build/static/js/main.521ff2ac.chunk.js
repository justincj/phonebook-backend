(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,t,n){e.exports=n(45)},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),u=n.n(c),o=n(20),l=n(6),i=n(2),s=n(7),f=n.n(s),m=n(8),d=n(19),b=function(e){var t=e.persons,n=e.onSubmit,c=e.handleUpdate,u=Object(a.useState)(""),o=Object(i.a)(u,2),s=o[0],b=o[1],p=Object(a.useState)(""),h=Object(i.a)(p,2),v=h[0],E=h[1],j=function(){var e=Object(d.a)(f.a.mark((function e(a){var r,u,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),r=Object(l.a)(t),e.prev=2,r.s();case 4:if((u=r.n()).done){e.next=18;break}if((o=u.value).name.toLowerCase()!==s.toLowerCase()){e.next=16;break}if(!window.confirm("".concat(o.name," is already added to phonebook, replace the old number with new one"))){e.next=12;break}return c(o.id,Object(m.a)(Object(m.a)({},o),{},{number:v})),b(""),E(""),e.abrupt("return");case 12:return n(o),b(""),E(""),e.abrupt("return");case 16:e.next=4;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),r.e(e.t0);case 23:return e.prev=23,r.f(),e.finish(23);case 26:return i={name:s,number:v},e.next=29,n(i);case 29:b(""),E("");case 31:case"end":return e.stop()}}),e,null,[[2,20,23,26]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:j},r.a.createElement("div",null,"name:"," ",r.a.createElement("input",{value:s,onChange:function(e){return b(e.target.value)}})),r.a.createElement("div",null,"number:"," ",r.a.createElement("input",{value:v,onChange:function(e){return E(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},p=function(e){var t=e.search,n=e.handleSearch;return r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{value:t,onChange:n}))},h=function(e){var t=e.person,n=e.handleDelete;return r.a.createElement("p",null,t.name," ",t.number,r.a.createElement("button",{onClick:n},"delete"))},v=n(5),E=n.n(v),j="/api/persons",w=function(){return E.a.get(j).then((function(e){return e.data}))},O=function(e){return E.a.post(j,e).then((function(e){return e.data}))},k=function(e){return E.a.delete("".concat(j,"/").concat(e))},S=function(e,t){return E.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},g=function(e){var t=e.message,n=e.type;return null===t?null:r.a.createElement("p",{className:n},t)},y=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),s=Object(i.a)(u,2),f=s[0],m=s[1],d=Object(a.useState)(null),v=Object(i.a)(d,2),E=v[0],j=v[1],y=Object(a.useState)(null),C=Object(i.a)(y,2),x=C[0],L=C[1];Object(a.useEffect)((function(){w().then((function(e){c(e)}))}),[]);var D=f?n.filter((function(e){return e.name.toLowerCase().startsWith(f.toLowerCase())})):n;return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),E?r.a.createElement(g,{message:E,type:"success"}):r.a.createElement(g,{message:x,type:"error"}),r.a.createElement(p,{search:f,handleSearch:function(e){return m(e.target.value)}}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(b,{persons:n,onSubmit:function(e){var t,a=Object(l.a)(n);try{for(a.s();!(t=a.n()).done;){t.value.name.toLowerCase(),e.name.toLowerCase()}}catch(r){a.e(r)}finally{a.f()}O(e).then((function(t){c([].concat(Object(o.a)(n),[t])),j("Added ".concat(e.name)),setTimeout((function(){j(null)}),3e3)}))},handleUpdate:function(e,t){S(e,t).then((function(a){c(n.map((function(n){return n.id!==e?n:t})))})).catch((function(a){L("Information ".concat(t.name," is already deleted from server")),c(n.filter((function(t){return t.id!==e}))),setTimeout((function(){L(null)}),3e3)}))}}),r.a.createElement("h2",null,"Numbers"),D.map((function(e){return r.a.createElement(h,{key:e.name,person:e,handleDelete:function(){return function(e){var t=n.filter((function(t){return t.id===e}));window.confirm("delete ".concat(t[0].name,"?"))&&k(e).then((function(t){c(n.filter((function(t){return t.id!==e})))}))}(e.id)}})})))};n(44);u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.521ff2ac.chunk.js.map