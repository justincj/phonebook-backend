(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,t,n){e.exports=n(45)},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),u=n.n(c),o=n(20),l=n(2),i=n(6),s=n.n(i),f=n(7),m=n(18),d=n(19),p=function(e){var t=e.persons,n=e.onSubmit,c=e.handleUpdate,u=Object(a.useState)(""),o=Object(l.a)(u,2),i=o[0],p=o[1],b=Object(a.useState)(""),h=Object(l.a)(b,2),v=h[0],E=h[1],j=function(){var e=Object(d.a)(s.a.mark((function e(a){var r,u,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),r=Object(m.a)(t),e.prev=2,r.s();case 4:if((u=r.n()).done){e.next=18;break}if((o=u.value).name.toLowerCase()!==i.toLowerCase()){e.next=16;break}if(!window.confirm("".concat(o.name," is already added to phonebook, replace the old number with new one"))){e.next=12;break}return c(o.id,Object(f.a)(Object(f.a)({},o),{},{numberid:v})),p(""),E(""),e.abrupt("return");case 12:return n(o),p(""),E(""),e.abrupt("return");case 16:e.next=4;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),r.e(e.t0);case 23:return e.prev=23,r.f(),e.finish(23);case 26:return l={name:i,numberid:v},e.next=29,n(l);case 29:p(""),E("");case 31:case"end":return e.stop()}}),e,null,[[2,20,23,26]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:j},r.a.createElement("div",null,"name:"," ",r.a.createElement("input",{value:i,onChange:function(e){return p(e.target.value)}})),r.a.createElement("div",null,"number:"," ",r.a.createElement("input",{value:v,onChange:function(e){return E(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},b=function(e){var t=e.search,n=e.handleSearch;return r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{value:t,onChange:n}))},h=function(e){var t=e.person,n=e.handleDelete;return r.a.createElement("p",null,t.name," ",t.numberid,r.a.createElement("button",{onClick:n},"delete"))},v=n(5),E=n.n(v),j="/api/persons",O=function(){return E.a.get(j).then((function(e){return e.data}))},w=function(e){return E.a.post(j,e).then((function(e){return e.data}))},k=function(e){return E.a.delete("".concat(j,"/").concat(e))},g=function(e,t){return E.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},S=function(e){var t=e.message,n=e.type;return null===t?null:r.a.createElement("p",{className:n},t)},y=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),i=Object(l.a)(u,2),s=i[0],f=i[1],m=Object(a.useState)(null),d=Object(l.a)(m,2),v=d[0],E=d[1],j=Object(a.useState)(null),y=Object(l.a)(j,2),x=y[0],C=y[1];Object(a.useEffect)((function(){O().then((function(e){c(e)}))}),[]);var L=s?n.filter((function(e){return e.name.toLowerCase().startsWith(s.toLowerCase())})):n;return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),v?r.a.createElement(S,{message:v,type:"success"}):r.a.createElement(S,{message:x,type:"error"}),r.a.createElement(b,{search:s,handleSearch:function(e){return f(e.target.value)}}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(p,{persons:n,onSubmit:function(e){w(e).then((function(t){c([].concat(Object(o.a)(n),[t])),E("Added ".concat(e.name)),setTimeout((function(){E(null)}),3e3)})).catch((function(e){console.log(e.response.data),C(e.response.data.error),setTimeout((function(){C(null)}),3e3)}))},handleUpdate:function(e,t){g(e,t).then((function(a){c(n.map((function(n){return n.id!==e?n:t})))})).catch((function(a){C("Information ".concat(t.name," is already deleted from server")),c(n.filter((function(t){return t.id!==e}))),setTimeout((function(){C(null)}),3e3)}))}}),r.a.createElement("h2",null,"Numbers"),L.map((function(e){return r.a.createElement(h,{key:e.name,person:e,handleDelete:function(){return function(e){var t=n.filter((function(t){return t.id===e}));window.confirm("delete ".concat(t[0].name,"?"))&&k(e).then((function(t){c(n.filter((function(t){return t.id!==e})))}))}(e.id)}})})))};n(44);u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.0fdbce13.chunk.js.map